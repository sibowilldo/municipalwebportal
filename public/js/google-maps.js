var map,markers=[];function initMap(){var e=new google.maps.Map(document.getElementById("map"),{center:{lat:-29.85868039999999,lng:31.021840399999974},zoom:13}),o=document.getElementById("searchMapInput");e.controls[google.maps.ControlPosition.TOP_LEFT].push(o);var n=new google.maps.InfoWindow,t=new google.maps.places.Autocomplete(o);t.bindTo("bounds",e);var a=new google.maps.Marker({map:e,animation:google.maps.Animation.DROP,anchorPoint:new google.maps.Point(0,-29)});t.addListener("place_changed",function(){n.close(),a.setVisible(!1);var o=t.getPlace();o.geometry.viewport?e.fitBounds(o.geometry.viewport):(e.setCenter(o.geometry.location),e.setZoom(17)),a.setPosition(o.geometry.location),a.setVisible(!0),markers.push(a);var s="";o.address_components&&(s=[o.address_components[0]&&o.address_components[0].short_name||"",o.address_components[1]&&o.address_components[1].short_name||"",o.address_components[2]&&o.address_components[2].short_name||""].join(" ")),n.setContent("<div><strong>"+o.name+"</strong><br>"+s),n.open(e,a),document.getElementById("location_description").value=o.formatted_address,document.getElementById("latitude").value=o.geometry.location.lat(),document.getElementById("longitude").value=o.geometry.location.lng()}),e.addListener("click",function(o){placeMarkerAndPanTo(o.latLng,e)})}function placeMarkerAndPanTo(e,o){clearMarkers();var n=new google.maps.InfoWindow,t=new google.maps.Marker({position:e,animation:google.maps.Animation.DROP,map:o}),a=t.position.lat(),s=t.position.lng();markers.push(t),n.setContent("<div><strong> Latitude: </strong>"+a+"<br><strong>Longitude:</strong> "+s),n.open(o,t),document.getElementById("location_description").value="",document.getElementById("latitude").value=a,document.getElementById("longitude").value=s,o.panTo(e)}function clearMarkers(){for(var e=0;e<markers.length;e++)markers[e].setMap(null)}
